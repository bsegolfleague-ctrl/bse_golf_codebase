<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scorecard • BSE Golf</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">Scorecard</div>
      <div class="helper">Course pars auto-filled from Setup</div>
    </div>

    <div id="courseMeta" class="card" style="margin-bottom:12px;"></div>

    <div class="card">
      <div class="title" style="font-size:16px;">Par</div>
      <div id="parRow" class="holes-grid"></div>
    </div>
  </div>

  <nav class="bottom-nav">
    <a href="index.html"><span class="icon">🏠</span>Home</a>
    <a href="setup.html"><span class="icon">⛳</span>Start</a>
    <a href="history.html"><span class="icon">📜</span>History</a>
    <a href="leaderboard.html"><span class="icon">🏆</span>Leaders</a>
  </nav>

  <script type="module">
    import { applyTheme, setActiveNav, toast, $, $all } from './common.js';
    import { db, doc, getDoc } from './firebase.js';
    applyTheme(); setActiveNav();

    const parRow = $('#parRow');
    const meta = $('#courseMeta');
    const selectedCourseId = localStorage.getItem('selectedCourseId');

    async function load() {
      if (!selectedCourseId) {
        meta.innerHTML = '<div class="helper">No course selected — go to Start Round.</div>';
        return;
      }
      const snap = await getDoc(doc(db, 'courses', selectedCourseId));
      if (!snap.exists()) {
        meta.innerHTML = '<div class="helper">Course not found.</div>';
        return;
      }
      const c = snap.data();
      meta.innerHTML = \`<div><strong>\${c.name}</strong> • \${c.holes.length} holes • Total Par \${c.holes.reduce((a,b)=>a+b,0)}</div>\`;
      parRow.innerHTML = '';
      (c.holes || []).forEach((par, i) => {
        const div = document.createElement('div');
        div.className = 'hole';
        div.innerHTML = \`
          <label>Hole \${i+1}</label>
          <input type="number" min="3" max="6" value="\${par}" />
        \`;
        parRow.appendChild(div);
      });
    }
    load();
  </script>
</body>
</html>